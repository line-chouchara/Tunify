(function(){"use strict";var t={8713:function(t,e,a){var n=a(9242),o=a(3396);const r={id:"app"};function s(t,e,a,n,s,c){const i=(0,o.up)("NavBar"),d=(0,o.up)("router-view"),l=(0,o.up)("Footer");return(0,o.wg)(),(0,o.iD)("nav",r,[(0,o.Wm)(i),(0,o.Wm)(d),(0,o.Wm)(l)])}const c=t=>((0,o.dD)("data-v-27208cd8"),t=t(),(0,o.Cn)(),t),i={class:"navbar"},d={class:"logo"},l=c((()=>(0,o._)("span",{class:"site-name"},"Tunify",-1))),u={class:"auth-container"},g=c((()=>(0,o._)("button",{class:"auth-button"},"Authentification",-1))),h=c((()=>(0,o._)("button",{class:"nav-button"},"Discover",-1))),p=c((()=>(0,o._)("button",{class:"nav-button"},"Trending",-1)));function v(t,e,a,n,r,s){const c=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("nav",i,[(0,o._)("div",d,[(0,o.Wm)(c,{to:"/"},{default:(0,o.w5)((()=>[l])),_:1})]),(0,o._)("div",u,[r.isAuthenticated?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(c,{key:0,to:"/signup"},{default:(0,o.w5)((()=>[g])),_:1})),r.isAuthenticated?((0,o.wg)(),(0,o.j4)(c,{key:1,to:"/discover"},{default:(0,o.w5)((()=>[h])),_:1})):(0,o.kq)("",!0),r.isAuthenticated?((0,o.wg)(),(0,o.j4)(c,{key:2,to:"/trending"},{default:(0,o.w5)((()=>[p])),_:1})):(0,o.kq)("",!0),r.isAuthenticated?((0,o.wg)(),(0,o.iD)("button",{key:3,onClick:e[0]||(e[0]=(...t)=>s.logout&&s.logout(...t)),class:"auth-button"},"Déconnexion")):(0,o.kq)("",!0)])])}a(560);var m=a(4161);const f=m.Z.create({baseURL:"http://localhost:8000",withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}});f.interceptors.request.use((t=>{const e=JSON.parse(localStorage.getItem("authCode"));return e&&e.accessToken?(t.headers["Authorization"]=`Bearer ${e.accessToken}`,console.log("Setting Authorization Header:",t.headers["Authorization"])):console.log("No token found in local storage"),t}),(t=>(console.error("Error in request interceptor:",t),Promise.reject(t))));var k={login(){return f.get("/login")},logout(){return f.get("/logout")},getTracks(){return f.get("/tracks")},getRecentTracks(){return f.get("/recent-tracks")},getRecommendations(){return f.get("/recommendations")}},_={data(){return{isAuthenticated:!1}},methods:{checkAuthentication(){const t=localStorage.getItem("authCode");this.isAuthenticated=null!==t},async logout(){try{await k.logout(),localStorage.removeItem("authCode"),this.isAuthenticated=!1,this.$router.push("/")}catch(t){console.error("Error during logout:",t)}}},mounted(){this.checkAuthentication()},watch:{$route(){this.checkAuthentication()}}},y=a(89);const w=(0,y.Z)(_,[["render",v],["__scopeId","data-v-27208cd8"]]);var b=w;const T={class:"footer"},D=(0,o.uE)('<div class="footer-container" data-v-6047d26a><div class="content" data-v-6047d26a><p data-v-6047d26a>© 2021 Tunify</p><ul class="footer-links" data-v-6047d26a><li data-v-6047d26a><a href="#" data-v-6047d26a>Privacy Policy</a></li><li data-v-6047d26a><a href="#" data-v-6047d26a>Terms of Use</a></li><li data-v-6047d26a><a href="#" data-v-6047d26a>Contact Us</a></li></ul></div></div>',1),A=[D];function I(t,e){return(0,o.wg)(),(0,o.iD)("footer",T,A)}const C={},R=(0,y.Z)(C,[["render",I],["__scopeId","data-v-6047d26a"]]);var z=R,S={name:"App",components:{NavBar:b,Footer:z}};const j=(0,y.Z)(S,[["render",s]]);var O=j,x=a(678),U=a.p+"img/logo.4420bf2d.png",L=a.p+"img/asset1.56538c78.png",E=a.p+"img/asset2.308560fe.png",q=a.p+"img/asset3.60b32bbb.png";const Z=t=>((0,o.dD)("data-v-d4eec87c"),t=t(),(0,o.Cn)(),t),P={class:"container"},M=(0,o.uE)('<section class="introduction" data-v-d4eec87c><img src="'+U+'" alt="Tunify Logo" data-v-d4eec87c><h1 data-v-d4eec87c><span data-v-d4eec87c> WELCOME TO TUNIFY</span></h1><p data-v-d4eec87c>Tunify is a platform designed for music lovers. Discover new tracks, create playlists, and connect with artists.</p></section><section class="card-section" data-v-d4eec87c><div class="card" data-v-d4eec87c><img src="'+L+'" alt="Discover Image" data-v-d4eec87c><div class="card-body" data-v-d4eec87c><h5 class="card-title" data-v-d4eec87c>Discover</h5><p class="card-text" data-v-d4eec87c>Input your favorite songs and get personalized recommendations. Engage with our platform and explore new horizons of music.</p></div></div><div class="card" data-v-d4eec87c><img src="'+E+'" alt="Trending Image" data-v-d4eec87c><div class="card-body" data-v-d4eec87c><h5 class="card-title" data-v-d4eec87c>Latest Trends</h5><p class="card-text" data-v-d4eec87c>Stay updated with the latest trending songs. Be in the loop and never miss out on the latest hits.</p></div></div><div class="card" data-v-d4eec87c><img src="'+q+'" alt="About Image" data-v-d4eec87c><div class="card-body" data-v-d4eec87c><h5 class="card-title" data-v-d4eec87c>About Tunify</h5><p class="card-text" data-v-d4eec87c>Learn more about our cutting-edge song recommendation system and our mission to redefine music streaming experiences.</p></div></div></section>',2),B={class:"join_us"},W=Z((()=>(0,o._)("h2",null,[(0,o._)("span",null,"Join the platform now!")],-1)));function N(t,e){const a=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",P,[M,(0,o._)("div",B,[W,(0,o.Wm)(a,{to:"/signup",class:"btn_join"},{default:(0,o.w5)((()=>[(0,o.Uk)("Sign Up")])),_:1})])])}const F={},Y=(0,y.Z)(F,[["render",N],["__scopeId","data-v-d4eec87c"]]);var $=Y;const H=t=>((0,o.dD)("data-v-5d52047d"),t=t(),(0,o.Cn)(),t),J={class:"trending-page"},K=H((()=>(0,o._)("h1",{class:"trending-title"},[(0,o._)("span",null,"Trend")],-1))),V=H((()=>(0,o._)("section",{class:"recent-tracks-section"},[(0,o._)("h2",null,"Recently listened to songs")],-1)));function G(t,e,a,n,r,s){const c=(0,o.up)("RecentTracks");return(0,o.wg)(),(0,o.iD)("div",J,[K,V,(0,o.Wm)(c)])}var Q=a(7139);const X={class:"tracks-container"},tt=["src"],et={class:"track-details"},at={class:"track-title"},nt={class:"track-artist"},ot=["href"];function rt(t,e,a,n,r,s){return(0,o.wg)(),(0,o.iD)("div",X,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.tracks,(t=>((0,o.wg)(),(0,o.iD)("div",{key:t.spotify_link,class:"track-card"},[(0,o._)("img",{src:t.album_image,alt:"Album Image",class:"album-image"},null,8,tt),(0,o._)("div",et,[(0,o._)("h3",at,(0,Q.zw)(t.title),1),(0,o._)("p",nt,(0,Q.zw)(t.artist),1),(0,o._)("a",{href:t.spotify_link,target:"_blank",rel:"noopener"},"Écouter sur Spotify",8,ot)])])))),128))])}var st={data(){return{tracks:[]}},async mounted(){try{console.log(k);const t=await k.getRecentTracks();this.tracks=t.data}catch(t){console.error("Error fetching recent tracks:",t)}}};const ct=(0,y.Z)(st,[["render",rt],["__scopeId","data-v-693c09ac"]]);var it=ct,dt={components:{RecentTracks:it}};const lt=(0,y.Z)(dt,[["render",G],["__scopeId","data-v-5d52047d"]]);var ut=lt;function gt(t,e,a,n,r,s){return(0,o.wg)(),(0,o.iD)("div")}var ht={mounted(){console.log("Composant callback monté.");const t=window.location.hash.substr(1).split("&").reduce(((t,e)=>{const a=e.split("=");return t[a[0]]=a[1],t}),{});console.log("hashParams:",t),t.access_token?(console.log("Token trouvé dans hashParams."),this.authorize.accessToken=t.access_token,this.authorize.tokenType=t.token_type,this.authorize.expiredIn=t.expires_in,this.authorize.state=t.state,this.setTokenLocal()):console.log("Token non trouvé dans hashParams.")},data(){return{authorize:{accessToken:null,tokenType:null,expiredIn:null,state:null}}},methods:{setTokenLocal:function(){console.log("Définir le token dans le localStorage."),localStorage.setItem("authCode",JSON.stringify(this.authorize)),this.$router.replace("/trending"),console.log("Redirection vers /trending.")}}};const pt=(0,y.Z)(ht,[["render",gt]]);var vt=pt,mt=a.p+"img/spotify.b2745b74.jpeg";const ft=t=>((0,o.dD)("data-v-5e7e4412"),t=t(),(0,o.Cn)(),t),kt={class:"sign-in-container"},_t={class:"sign-in-box"},yt=ft((()=>(0,o._)("img",{src:mt,alt:"Spotify Logo",class:"spotify-logo"},null,-1))),wt=ft((()=>(0,o._)("h1",null,"Log in to Tunify with Spotify",-1))),bt=ft((()=>(0,o._)("p",null,"To continue, log in to Spotify. Tunify does not save your account or personal information.",-1))),Tt={key:0,class:"error-message"};function Dt(t,e,a,n,r,s){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",kt,[(0,o._)("div",_t,[yt,wt,bt,(0,o._)("button",{onClick:e[0]||(e[0]=(...t)=>s.authButton&&s.authButton(...t)),class:"sign-in-button"}," Sign in with Spotify ")])]),r.errorMessage?((0,o.wg)(),(0,o.iD)("p",Tt,(0,Q.zw)(r.errorMessage),1)):(0,o.kq)("",!0)],64)}var At={data(){return{authUrl:null,errorMessage:null}},mounted(){const t=localStorage.getItem("authCode");null!==t?this.$router.replace("/trending"):this.getAuthURL()},methods:{async getAuthURL(){try{let t=await k.login();200===t.status&&(this.authUrl=t.data.url)}catch(t){console.error("Erreur lors de la récupération de l'URL d'authentification:",t),this.errorMessage="Une erreur s'est produite lors de la connexion. Veuillez réessayer."}},authButton(){this.authUrl?window.location.href=this.authUrl:console.error("URL d'authentification non disponible")}}};const It=(0,y.Z)(At,[["render",Dt],["__scopeId","data-v-5e7e4412"]]);var Ct=It;const Rt={class:"discover-container"},zt={key:0,class:"loading"},St={key:1,class:"error"},jt={key:2,class:"recommendations"},Ot=(0,o._)("h2",null,"Recommended For You",-1),xt={class:"tracks-list"};function Ut(t,e,a,n,r,s){const c=(0,o.up)("track-card");return(0,o.wg)(),(0,o.iD)("div",Rt,[r.loading?((0,o.wg)(),(0,o.iD)("div",zt," Loading... ")):(0,o.kq)("",!0),r.error?((0,o.wg)(),(0,o.iD)("div",St," Error fetching data: "+(0,Q.zw)(r.errorMessage),1)):(0,o.kq)("",!0),r.recommendedTracks.length>0?((0,o.wg)(),(0,o.iD)("section",jt,[Ot,(0,o._)("div",xt,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.recommendedTracks,(t=>((0,o.wg)(),(0,o.j4)(c,{key:t.id,track:t},null,8,["track"])))),128))])])):(0,o.kq)("",!0)])}const Lt={class:"track-card"},Et=["src"],qt={class:"track-details"},Zt={class:"track-title"},Pt={class:"track-artist"},Mt=["href"];function Bt(t,e,a,n,r,s){return(0,o.wg)(),(0,o.iD)("div",Lt,[(0,o._)("img",{src:a.track.album_image,alt:"Album Image",class:"album-image"},null,8,Et),(0,o._)("div",qt,[(0,o._)("h3",Zt,(0,Q.zw)(a.track.title),1),(0,o._)("p",Pt,(0,Q.zw)(a.track.artist),1),(0,o._)("a",{href:a.track.spotify_link,target:"_blank",rel:"noopener"},"Écouter sur Spotify",8,Mt)])])}var Wt={props:{track:{type:Object,required:!0}}};const Nt=(0,y.Z)(Wt,[["render",Bt],["__scopeId","data-v-98be9768"]]);var Ft=Nt,Yt={components:{TrackCard:Ft},data(){return{recentTracks:[],recommendedTracks:[],loading:!0,error:!1,errorMessage:""}},computed:{formattedRecommendedTracks(){return this.recommendedTracks.map((t=>({id:t.id||null,album_image:t.album_image||"",title:t.title||"",artist:t.artist||"",spotify_link:t.spotify_link||""})))}},async mounted(){try{const t=await k.getRecentTracks();console.log("Recent Tracks:",t.data),this.recentTracks=t.data;const e=await k.getRecommendations();console.log("Recommendation Response:",e.data),this.recommendedTracks=[...e.data]}catch(t){console.error("Error fetching data:",t),this.error=!0,this.errorMessage=t.message||"Unknown error.",t.response&&console.error("API response:",t.response.data)}finally{this.loading=!1}}};const $t=(0,y.Z)(Yt,[["render",Ut]]);var Ht=$t;const Jt=[{path:"/",name:"home",component:$},{path:"/trending",name:"trending",component:ut},{path:"/signup",name:"signup",component:Ct},{path:"/callback",name:"callback",component:vt},{path:"/discover",name:"discover",component:Ht},{path:"/recentracks",name:"recentracks",component:it}],Kt=(0,x.p7)({history:(0,x.PO)(),routes:Jt});var Vt=Kt;(0,n.ri)(O).use(Vt).mount("#app")}},e={};function a(n){var o=e[n];if(void 0!==o)return o.exports;var r=e[n]={exports:{}};return t[n].call(r.exports,r,r.exports,a),r.exports}a.m=t,function(){var t=[];a.O=function(e,n,o,r){if(!n){var s=1/0;for(l=0;l<t.length;l++){n=t[l][0],o=t[l][1],r=t[l][2];for(var c=!0,i=0;i<n.length;i++)(!1&r||s>=r)&&Object.keys(a.O).every((function(t){return a.O[t](n[i])}))?n.splice(i--,1):(c=!1,r<s&&(s=r));if(c){t.splice(l--,1);var d=o();void 0!==d&&(e=d)}}return e}r=r||0;for(var l=t.length;l>0&&t[l-1][2]>r;l--)t[l]=t[l-1];t[l]=[n,o,r]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.p="/"}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,r,s=n[0],c=n[1],i=n[2],d=0;if(s.some((function(e){return 0!==t[e]}))){for(o in c)a.o(c,o)&&(a.m[o]=c[o]);if(i)var l=i(a)}for(e&&e(n);d<s.length;d++)r=s[d],a.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return a.O(l)},n=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(8713)}));n=a.O(n)})();
//# sourceMappingURL=app.b624ed07.js.map